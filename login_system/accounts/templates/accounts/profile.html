{% extends 'base.html' %}
{% load static %}

{% block title %}
    Profile
{% endblock %}

{% block styles %}
body {
    background-color: #f0f2f5;
    font-family: 'Segoe UI', sans-serif;
}

.profile-card {
    max-width: 450px;
    margin: 80px auto;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    background-color: white;
}

.profile-pic {
    width: 120px;
    height: 120px;
    object-fit: cover;
    border-radius: 50%;
    border: 3px solid #0d6efd;
}

.btn-custom {
    background-color: #0d6efd;
    color: white;
    font-weight: 500;
    border-radius: 10px;
    padding: 10px 15px;
    text-decoration: none;
}

.info-label {
    font-weight: 500;
}

/* Toast container bottom-right */
#toast-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1055;
}

.toast {
    border-radius: 10px;
    min-width: 250px;
}
{% endblock %}

{% block content %}
<div id="toast-container">
    {% if messages %}
        {% for message in messages %}
            <div class="toast align-items-center text-bg-{{ message.tags }} border-0 mb-2" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="3500">
                <div class="d-flex">
                    <div class="toast-body">
                        {{ message }}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>

<div class="profile-card text-center">
    <h2 class="mb-4">Your Profile</h2>

    <img src="{% static 'images/default_profile.png' %}" alt="Default Profile" class="profile-pic mb-3">


    <!-- User info -->
    <div class="text-start mt-3">
        <p><span class="info-label">Username:</span> {{ user.username }}</p>
        <p><span class="info-label">Email:</span> {{ user.email }}</p>
        <p><span class="info-label">Created at:</span> {{ user.last_login|date:"F j, Y, g:i a" }}</p>
    </div>

    <!-- Buttons -->
    <div class="mt-4">
        <a href="{% url 'password_change'%}" class="btn btn-outline-primary w-100 mt-2">Password Change</a>
        <a href="{% url 'dashboard'%}" class="btn btn-outline-secondary w-100 mt-2">back</a>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Initialize all toasts
    document.addEventListener('DOMContentLoaded', function () {
        var toastElList = [].slice.call(document.querySelectorAll('.toast'))
        toastElList.map(function (toastEl) {
            var toast = new bootstrap.Toast(toastEl)
            toast.show()
        });
    });
{% endblock %}
